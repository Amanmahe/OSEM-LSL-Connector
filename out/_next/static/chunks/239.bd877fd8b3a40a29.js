"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[239],{1239:(e,r,a)=>{a.r(r),a.d(r,{default:()=>l});var t=a(5155),n=a(2115),s=a(3837),o=a(3645),c=a(5714).Buffer;let l=()=>{let[e,r]=(0,n.useState)(!1),a=(0,n.useRef)(null),l=(0,n.useRef)(!1),[m,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!m)return;let e=new WebSocket("ws://oric.local:81");return a.current=e,e.onopen=()=>{console.log("WebSocket connection established.");let r=[];r.push({command:"reset",parameters:[]},{command:"sdatac",parameters:[]},{command:"wreg",parameters:[1,147]},{command:"wreg",parameters:[2,192]},{command:"wreg",parameters:[3,236]},{command:"wreg",parameters:[21,32]},{command:"wreg",parameters:[5,96]},{command:"wreg",parameters:[6,96]},{command:"wreg",parameters:[7,96]},{command:"wreg",parameters:[8,96]},{command:"wreg",parameters:[9,96]},{command:"wreg",parameters:[10,96]},{command:"wreg",parameters:[11,96]},{command:"wreg",parameters:[12,96]},{command:"status",parameters:[]},{command:"rdatac",parameters:[]}),r.forEach(r=>e.send(JSON.stringify(r))),console.log(r)},e.onmessage=e=>{l.current=!0,r(!0);let a=e.data;if("string"==typeof a){console.warn("Unexpected string data received:",a);return}if(a instanceof Blob){let e=new FileReader;e.onloadend=()=>{let r=c.from(e.result);for(let e=0;e<r.length;e+=32){let a=r.slice(e,e+32),t=[];for(let e=0;e<8;e++){let r=8+3*e,n=a.readIntBE(r,3);t.push(n)}s.I8.invoke("start_streaming",{channelData:t}).then(e=>{console.log("Data sent to backend successfully:",e)}).catch(e=>{console.error("Error sending data to backend:",e)})}},e.readAsArrayBuffer(a)}else console.error("Unexpected data format received:",a)},e.onclose=()=>{d(!1),console.log("WebSocket connection closed.")},()=>{e.close()}},[m,8]),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-200",children:(0,t.jsx)("div",{onClick:()=>{d(!0)},onMouseDown:e=>{let r=e.currentTarget;r&&(r.classList.add("scale-95","shadow-active"),setTimeout(()=>{r.classList.remove("scale-95","shadow-active")},100))},className:"\n          flex items-center justify-center w-28 h-28 rounded-full cursor-pointer bg-gray-200 shadow-[8px_8px_16px_#bebebe,-8px_-8px_16px_#ffffff] \n          transition-all duration-600 relative ".concat(l.current?"animate-[rotateShadow_1.5s_linear_infinite]":"","\n        "),style:{pointerEvents:l.current?"none":"auto"},children:(0,t.jsx)(o.A,{size:40,className:"transition-colors duration-300 ".concat(e?"text-green-500":"text-gray-500")})})})}}}]);